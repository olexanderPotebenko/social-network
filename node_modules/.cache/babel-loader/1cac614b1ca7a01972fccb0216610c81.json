{"ast":null,"code":"var _jsxFileName = \"/home/i/Documents/projects/social-network/src/components/Profile/Profile.jsx\";\nimport React from 'react';\nimport styles from './Profile.module.css';\nimport { connect } from 'react-redux';\nimport { NavLink, Route } from 'react-router-dom';\nimport { compose } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport { getProfile } from '../../reducers/profileReducer.js'; //hocs\n\nimport WithAuthData from '../../hocs/WithAuthData.jsx';\nimport WithSignInRedirect from '../../hocs/WithSignInRedirect.jsx'; //reducers\n\nimport { sendMessage } from '../../reducers/messagesReducer'; //components\n\nimport Preloader from '../commons/Preloader/Preloader.jsx';\nimport DropDownMenu from '../commons/DropDownMenu/DropDownMenu';\nimport Posts from './Posts/Posts';\nimport Subscribers from './Subscribers/Subscribers';\nimport Subscribed from './Subscribed/Subscribed';\nimport Modal from '../commons/Modal/Modal';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\n\nclass Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      postedModal: false,\n      scrollTop: 0\n    };\n\n    this.changeVisibleModal = (bool => this.setState({\n      postedModal: bool\n    })).bind(this);\n  }\n\n  componentDidMount() {}\n\n  componentWillUpdate() {}\n\n  render() {\n    let selected = this.props.location.pathname.split('/').slice(-1)[0];\n\n    if (!this.props.profile) {\n      return /*#__PURE__*/React.createElement(Preloader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 20\n        }\n      });\n    }\n\n    ;\n    let {\n      status,\n      name,\n      photos,\n      contacts,\n      email\n    } = this.props.profile;\n    let posts_styles = [styles.menu_item, styles.separator];\n    let subscribers_styles = [styles.menu_item, styles.separator];\n    let subscribed_styles = [styles.menu_item];\n\n    switch (selected) {\n      case 'posts':\n        posts_styles.push(styles.current_item);\n        break;\n\n      case 'subscribers':\n        subscribers_styles.push(styles.current_item);\n        break;\n\n      case 'subscribed':\n        subscribed_styles.push(styles.current_item);\n        break;\n    }\n\n    ;\n    posts_styles = posts_styles.join(' ');\n    subscribers_styles = subscribers_styles.join(' ');\n    subscribed_styles = subscribed_styles.join(' ');\n    let drop_down_menu_items_arr = [{\n      value: 'more info',\n      onClick: (e => {\n        e.preventDefault();\n        this.changeVisibleModal(true);\n      }).bind(this)\n    }, {\n      value: 'send message',\n      onClick: (e => {\n        e.preventDefault();\n        debugger;\n        let options = {\n          id: this.props.auth.id,\n          token: this.props.auth.token,\n          user_id: this.props.profile.id\n        };\n        this.props.history.push(`/messages/${this.props.auth.id}/send/${this.props.profile.id}`);\n        this.props.sendMessage(options);\n      }).bind(this)\n    } // {\n    //     value: 'follow',\n    //     onClick: () => alert('not implemented functionality'),\n    // },\n    // {\n    //     value: 'follow',\n    //     onClick: () => alert('not implemented functionality'),\n    // },\n    // {\n    //     value: 'follow',\n    //     onClick: () => alert('not implemented functionality'),\n    // },\n    ];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: 'wrp',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      className: styles.horizontal_menu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      className: posts_styles,\n      onClick: () => selected = 'posts',\n      to: \"posts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 29\n      }\n    }, \"POSTS\", ` ${this.props.posts.length}`)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      className: subscribers_styles,\n      onClick: () => selected = 'subscribers',\n      to: \"subscribers\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }\n    }, \"SUBSCRIBERS\", ` ${this.props.subscribers.length}`)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      className: subscribed_styles,\n      onClick: () => selected = 'subscribed',\n      to: \"subscribed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 29\n      }\n    }, \"SUBSRIBED\", ` ${this.props.subscribed.length}`)))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '5px',\n        right: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DropDownMenu, {\n      drop_down_menu_items_arr: drop_down_menu_items_arr,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['profile-name'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, this.props.profile.name)), this.state.postedModal && /*#__PURE__*/React.createElement(Modal, {\n      width: 800,\n      height: 420,\n      Component: ProfileInfo,\n      changeVisibleModal: this.changeVisibleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 43\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        overflow: 'hidden'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      component: Posts,\n      path: '/profile/:user_id/posts',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      component: Subscribers,\n      path: '/profile/:user_id/subscribers',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      component: Subscribed,\n      path: '/profile/:user_id/subscribed',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 25\n      }\n    })));\n  }\n\n}\n\n;\n\nclass ProfileContainer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    let user_id = this.props.match.params.user_id;\n    user_id = user_id;\n    let options = {\n      user_id,\n      id: this.props.auth ? this.props.auth.id : '',\n      token: this.props.auth ? this.props.auth.token : ''\n    };\n    this.props.getProfile(options);\n  }\n\n  componentWillUpdate(props) {\n    if (props.profile !== null) {\n      let route_profile = props.location.pathname.split('/').filter(item => item !== '')[1];\n      let current_profile = props.profile.id;\n\n      if (route_profile !== current_profile) {\n        let user_id = route_profile;\n        let options = {\n          user_id,\n          id: this.props.auth ? this.props.auth.id : '',\n          token: this.props.auth ? this.props.auth.token : ''\n        };\n        this.props.getProfile(options);\n      }\n\n      ;\n    }\n\n    ;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Profile, Object.assign({}, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 16\n      }\n    }));\n  }\n\n}\n\nlet mapsStateToProps = state => {\n  return {\n    profile: state.profilePage.profile,\n    posts: state.profilePage.posts,\n    subscribers: state.profilePage.profile && state.profilePage.profile.subscribers || [],\n    subscribed: state.profilePage.profile && state.profilePage.profile.subscribed_to || []\n  };\n};\n\nexport default compose(connect(mapsStateToProps, {\n  getProfile,\n  sendMessage\n}), WithAuthData, WithSignInRedirect)(withRouter(ProfileContainer));","map":{"version":3,"sources":["/home/i/Documents/projects/social-network/src/components/Profile/Profile.jsx"],"names":["React","styles","connect","NavLink","Route","compose","withRouter","getProfile","WithAuthData","WithSignInRedirect","sendMessage","Preloader","DropDownMenu","Posts","Subscribers","Subscribed","Modal","ProfileInfo","Profile","Component","state","postedModal","scrollTop","changeVisibleModal","bool","setState","bind","componentDidMount","componentWillUpdate","render","selected","props","location","pathname","split","slice","profile","status","name","photos","contacts","email","posts_styles","menu_item","separator","subscribers_styles","subscribed_styles","push","current_item","join","drop_down_menu_items_arr","value","onClick","e","preventDefault","options","id","auth","token","user_id","history","header","horizontal_menu","posts","length","subscribers","subscribed","position","top","right","overflow","ProfileContainer","constructor","match","params","route_profile","filter","item","current_profile","mapsStateToProps","profilePage","subscribed_to"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styles from './Profile.module.css';\nimport {connect} from 'react-redux';\nimport {NavLink, Route} from 'react-router-dom';\nimport {compose} from 'redux';\nimport {withRouter} from 'react-router-dom';\nimport {getProfile} from '../../reducers/profileReducer.js';\n\n//hocs\nimport WithAuthData from '../../hocs/WithAuthData.jsx';\nimport WithSignInRedirect from '../../hocs/WithSignInRedirect.jsx';\n\n//reducers\nimport {sendMessage} from '../../reducers/messagesReducer';\n\n\n//components\nimport Preloader from '../commons/Preloader/Preloader.jsx';\nimport DropDownMenu from '../commons/DropDownMenu/DropDownMenu';\nimport Posts from './Posts/Posts';\nimport Subscribers from './Subscribers/Subscribers';\nimport Subscribed from './Subscribed/Subscribed';\nimport Modal from '../commons/Modal/Modal';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\n\n\n\nclass Profile extends React.Component {\n\n    state = {\n        postedModal: false,\n        scrollTop: 0,\n    }\n\n    componentDidMount() {\n    }\n\n    componentWillUpdate() {\n    }\n\n    changeVisibleModal = ((bool) => this.setState({postedModal: bool})).bind(this);\n\n\n    render() {\n        let selected = this.props.location.pathname.split('/').slice(-1)[0];\n\n        if(!this.props.profile) {\n            return <Preloader />;\n        };\n        let {status, name, photos, contacts, email} = this.props.profile;\n\n        let posts_styles = [styles.menu_item, styles.separator];\n        let subscribers_styles = [styles.menu_item, styles.separator];\n        let subscribed_styles = [styles.menu_item];\n\n        switch(selected) {\n            case 'posts':\n                 posts_styles.push(styles.current_item);\n                break;\n            case 'subscribers':\n                subscribers_styles.push(styles.current_item);\n                break;\n            case 'subscribed':\n                subscribed_styles.push(styles.current_item);\n                break;\n        };\n\n        posts_styles = posts_styles.join(' ');\n        subscribers_styles = subscribers_styles.join(' ');\n        subscribed_styles = subscribed_styles.join(' ');\n\n        let drop_down_menu_items_arr = [\n            {\n                value: 'more info',\n                onClick: ((e) => {\n                            e.preventDefault();\n                    this.changeVisibleModal(true)\n                }).bind(this),\n            },\n            {\n                value: 'send message',\n                onClick: ((e) => {\n                    e.preventDefault();\n                    debugger;\n                    let options = {\n                        id: this.props.auth.id,\n                        token: this.props.auth.token,\n                        user_id: this.props.profile.id,\n                    };\n                    this.props.history.push(`/messages/${this.props.auth.id}/send/${this.props.profile.id}`);\n                    this.props.sendMessage(options);\n                }).bind(this),\n            },\n            // {\n            //     value: 'follow',\n            //     onClick: () => alert('not implemented functionality'),\n            // },\n            // {\n            //     value: 'follow',\n            //     onClick: () => alert('not implemented functionality'),\n            // },\n            // {\n            //     value: 'follow',\n            //     onClick: () => alert('not implemented functionality'),\n            // },\n\n        ];\n\n        return <div className={'wrp'}>\n            <div className={styles.header}>\n                <nav className={styles.horizontal_menu}>\n                    <ul>\n                        <li >\n                            <NavLink className={posts_styles} \n                                onClick={() => selected = 'posts'}\n                                to='posts' >\n                                POSTS\n                                {\n                                    ` ${this.props.posts.length}`\n                                }\n                            </NavLink>\n                        </li>\n                        <li>\n                            <NavLink  className={subscribers_styles} \n                                onClick={() => selected = 'subscribers'}\n                                to='subscribers' >\n                                SUBSCRIBERS\n                                {\n                                    ` ${this.props.subscribers.length}`\n                                }\n                            </NavLink>\n                        </li>\n                        <li>\n                            <NavLink className={subscribed_styles} \n                                onClick={() => selected = 'subscribed'}\n                                to='subscribed' >\n                                SUBSRIBED \n                                {\n                                    ` ${this.props.subscribed.length}`\n                                }\n                            </NavLink>\n                        </li>\n                    </ul>\n                </nav>\n                <div \n                    style={ {\n                        position: 'absolute',\n                        top: '5px', right: 40,\n                    } } >\n                    <DropDownMenu \n                        drop_down_menu_items_arr={drop_down_menu_items_arr}/>\n                </div>\n                <div className={styles['profile-name']} >\n                    {this.props.profile.name}\n                </div>\n                {/*\n                <div className={styles['profile-info']} >\n                    <a href='' className={styles['profile-more-info']}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.changeVisibleModal(true)}\n                        } >\n                        more info\n                    </a>\n                </div>\n                */}\n            </div>\n            {\n                this.state.postedModal && <Modal width={800} height={420} \n                    Component={ProfileInfo}\n                    changeVisibleModal={ this.changeVisibleModal } />\n\n            }\n                    <div style={ {overflow: 'hidden' } }>\n                        <Route component={Posts} path={'/profile/:user_id/posts'} />\n                        <Route component={Subscribers} path={'/profile/:user_id/subscribers'}  />\n                        <Route component={Subscribed} path={'/profile/:user_id/subscribed'}  />\n                    </div>\n                </div>\n    }\n\n};\n\n\nclass ProfileContainer extends React.Component {\n    constructor(props) {\n        super(props);\n    };\n\n    componentDidMount () {\n\n        let user_id = this.props.match.params.user_id;\n        user_id = user_id;\n        let options = {\n            user_id,\n            id: this.props.auth? this.props.auth.id: '',\n            token: this.props.auth? this.props.auth.token: '',\n        };\n        this.props.getProfile(options);\n    }\n\n    componentWillUpdate(props) {\n\n        if(props.profile !== null){\n            let route_profile = props.location.pathname\n                .split('/').filter(item => item !== '')[1];\n            let current_profile = props.profile.id;\n\n            if(route_profile !== current_profile) {\n                let user_id = route_profile;\n                let options = {\n                    user_id,\n                    id: this.props.auth? this.props.auth.id: '',\n                    token: this.props.auth? this.props.auth.token: '',\n                };\n                this.props.getProfile(options);\n            };\n        };\n    }\n\n    render() {\n\n        return <Profile {...this.props} />\n    }\n}\n\nlet mapsStateToProps = (state) => {\n    return {\n        profile: state.profilePage.profile,\n        posts: state.profilePage.posts,\n        subscribers: state.profilePage.profile && state.profilePage.profile.subscribers || [],\n        subscribed: state.profilePage.profile && state.profilePage.profile.subscribed_to || [],\n    };\n};\n\nexport default compose(\n    connect(mapsStateToProps, {getProfile, sendMessage}),\n    WithAuthData,\n    WithSignInRedirect,\n)(withRouter(ProfileContainer));\n"]},"metadata":{},"sourceType":"module"}