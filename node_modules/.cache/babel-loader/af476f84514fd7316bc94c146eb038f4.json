{"ast":null,"code":"var _jsxFileName = \"/root/Documents/projects/social-network/src/components/commons/AvatarByPath/AvatarByPath.jsx\";\nimport React from 'react';\nimport styles from './AvatarByPath.module.css';\nimport FetchingToggle from '../FetchingToggle/FetchingToggle.jsx';\nimport avatar_default from '../../../assets/images/avatar_default.png';\nimport { host } from '../../../api/api.js';\n\nclass AvatarByPath extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      id: this.props.id,\n      photo: `http://${host}:8080/profile/${this.props.id}/photos/small/${this.props.photo}`,\n      load: false\n    };\n\n    this.onError = () => {\n      this.setState({\n        photo: avatar_default\n      });\n      this.setState({\n        load: true\n      });\n    };\n\n    this.onLoad = () => {\n      this.setState({\n        load: true\n      });\n    };\n  }\n\n  componentDidMount() {}\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.id !== this.props.id || prevProps.photo !== this.props.photo) {\n      this.setState({\n        id: this.props.id,\n        photo: `http://${host}:8080/profile/${this.props.id}/photos/small/${this.props.photo}`,\n        load: false\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.avatar,\n      style: this.props.styles && this.props.styles.wrp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 12\n      }\n    }, !this.state.load && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.fetching,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(FetchingToggle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.photo,\n      style: this.props.styles && this.props.styles.img,\n      onLoad: this.onLoad,\n      onError: this.onError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}\n\nexport default AvatarByPath;","map":{"version":3,"sources":["/root/Documents/projects/social-network/src/components/commons/AvatarByPath/AvatarByPath.jsx"],"names":["React","styles","FetchingToggle","avatar_default","host","AvatarByPath","Component","state","id","props","photo","load","onError","setState","onLoad","componentDidMount","componentDidUpdate","prevProps","render","avatar","wrp","fetching","img"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,OAAOC,cAAP,MAA2B,sCAA3B;AACA,OAAOC,cAAP,MAA2B,2CAA3B;AACA,SAAQC,IAAR,QAAmB,qBAAnB;;AAEA,MAAMC,YAAN,SAA2BL,KAAK,CAACM,SAAjC,CAA2C;AAAA;AAAA;AAAA,SAEzCC,KAFyC,GAEjC;AACNC,MAAAA,EAAE,EAAE,KAAKC,KAAL,CAAWD,EADT;AAENE,MAAAA,KAAK,EAAG,UAASN,IAAK,iBAAgB,KAAKK,KAAL,CAAWD,EAAG,iBAAgB,KAAKC,KAAL,CAAWC,KAAM,EAF/E;AAGNC,MAAAA,IAAI,EAAE;AAHA,KAFiC;;AAAA,SAoBzCC,OApByC,GAoB/B,MAAM;AACd,WAAKC,QAAL,CAAc;AAACH,QAAAA,KAAK,EAAEP;AAAR,OAAd;AACA,WAAKU,QAAL,CAAc;AAACF,QAAAA,IAAI,EAAE;AAAP,OAAd;AACD,KAvBwC;;AAAA,SAyBzCG,MAzByC,GAyBhC,MAAM;AACb,WAAKD,QAAL,CAAc;AAACF,QAAAA,IAAI,EAAE;AAAP,OAAd;AACD,KA3BwC;AAAA;;AAQzCI,EAAAA,iBAAiB,GAAG,CACnB;;AACDC,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAC5B,QAAGA,SAAS,CAACT,EAAV,KAAiB,KAAKC,KAAL,CAAWD,EAA5B,IAAkCS,SAAS,CAACP,KAAV,KAAoB,KAAKD,KAAL,CAAWC,KAApE,EAA0E;AACxE,WAAKG,QAAL,CAAc;AACZL,QAAAA,EAAE,EAAE,KAAKC,KAAL,CAAWD,EADH;AAEZE,QAAAA,KAAK,EAAG,UAASN,IAAK,iBAAgB,KAAKK,KAAL,CAAWD,EAAG,iBAAgB,KAAKC,KAAL,CAAWC,KAAM,EAFzE;AAGZC,QAAAA,IAAI,EAAE;AAHM,OAAd;AAKD;AACF;;AAWDO,EAAAA,MAAM,GAAG;AAEP,wBAAO;AAAK,MAAA,SAAS,EAAEjB,MAAM,CAACkB,MAAvB;AACH,MAAA,KAAK,EAAE,KAAKV,KAAL,CAAWR,MAAX,IAAqB,KAAKQ,KAAL,CAAWR,MAAX,CAAkBmB,GAD3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGH,CAAC,KAAKb,KAAL,CAAWI,IAAZ,iBACK;AAAK,MAAA,SAAS,EAAEV,MAAM,CAACoB,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACP,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADO,CAJF,eAQL;AAAK,MAAA,GAAG,EAAE,KAAKd,KAAL,CAAWG,KAArB;AACE,MAAA,KAAK,EAAE,KAAKD,KAAL,CAAWR,MAAX,IAAqB,KAAKQ,KAAL,CAAWR,MAAX,CAAkBqB,GADhD;AAEE,MAAA,MAAM,EAAE,KAAKR,MAFf;AAGE,MAAA,OAAO,EAAE,KAAKF,OAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARK,CAAP;AAaD;;AA5CwC;;AA+C3C,eAAeP,YAAf","sourcesContent":["import React from 'react';\nimport styles from './AvatarByPath.module.css';\nimport FetchingToggle from '../FetchingToggle/FetchingToggle.jsx';\nimport avatar_default from '../../../assets/images/avatar_default.png';\nimport {host} from '../../../api/api.js';\n\nclass AvatarByPath extends React.Component {\n\n  state = {\n    id: this.props.id,\n    photo: `http://${host}:8080/profile/${this.props.id}/photos/small/${this.props.photo}`,\n    load: false,\n  }\n\n  componentDidMount() {\n  }\n  componentDidUpdate(prevProps) {\n    if(prevProps.id !== this.props.id || prevProps.photo !== this.props.photo){\n      this.setState({\n        id: this.props.id,\n        photo: `http://${host}:8080/profile/${this.props.id}/photos/small/${this.props.photo}`,\n        load: false,\n      });\n    }\n  }\n\n  onError = () => {\n    this.setState({photo: avatar_default});\n    this.setState({load: true});\n  }\n\n  onLoad = () => {\n    this.setState({load: true});\n  }\n\n  render() {\n\n    return <div className={styles.avatar}\n        style={this.props.styles && this.props.styles.wrp}\n    >\n      { !this.state.load\n          && <div className={styles.fetching}>\n      <FetchingToggle />\n    </div>\n      }\n      <img src={this.state.photo} \n        style={this.props.styles && this.props.styles.img}\n        onLoad={this.onLoad}\n        onError={this.onError} />\n      </div>\n  }\n}\n\nexport default AvatarByPath;\n"]},"metadata":{},"sourceType":"module"}