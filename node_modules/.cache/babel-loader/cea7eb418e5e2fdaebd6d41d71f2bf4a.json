{"ast":null,"code":"var _jsxFileName = \"/root/Documents/projects/social-network/src/components/Profile/Profile.jsx\";\nimport React from 'react';\nimport styles from './Profile.module.css';\nimport { connect } from 'react-redux';\nimport { NavLink, Route } from 'react-router-dom';\nimport { compose } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport { getProfile } from '../../reducers/profileReducer.js'; //hocs\n\nimport WithAuthData from '../../hocs/WithAuthData.jsx';\nimport WithSignInRedirect from '../../hocs/WithSignInRedirect.jsx'; //reducers\n\nimport { sendMessage, getDialogs, selectDialog } from '../../reducers/messagesReducer'; //components\n\nimport Preloader from '../commons/Preloader/Preloader.jsx';\nimport DropDownMenu from '../commons/DropDownMenu/DropDownMenu';\nimport Posts from './Posts/Posts';\nimport Subscribers from './Subscribers/Subscribers';\nimport Subscribed from './Subscribed/Subscribed';\nimport Modal from '../commons/Modal/Modal';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\nimport BackButtom from '../commons/BackButton/BackButton.jsx';\nimport FetchingToggle from '../commons/FetchingToggle/FetchingToggle.jsx';\nimport AvatarByPath from '../commons/AvatarByPath/AvatarByPath.jsx';\nimport avatar from '../../assets/images/avatar_default.png';\n\nclass Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      profInfoViewMode: false,\n      scrollTop: 0,\n      load: false\n    };\n\n    this.changeVisibleModal = (bool => this.setState({\n      profInfoViewMode: bool\n    })).bind(this);\n\n    this.onLoad = () => {\n      this.setState({\n        load: true\n      });\n    };\n\n    this.onError = () => {\n      this.setState({\n        load: true,\n        photo: avatar\n      });\n    };\n  }\n\n  componentDidMount() {}\n\n  componentWillUpdate() {}\n\n  render() {\n    if (!this.props.profile) {\n      return /*#__PURE__*/React.createElement(Preloader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 14\n        }\n      });\n    }\n\n    ;\n    let {\n      status,\n      name,\n      photos,\n      contacts,\n      email\n    } = this.props.profile;\n    let menu_items = [{\n      value: 'more info',\n      onClick: (e => {\n        this.changeVisibleModal(true);\n      }).bind(this)\n    }, {\n      value: 'subscribers',\n      onClick: (e => {\n        this.props.history.push(`/profile/${this.props.profile.id}/subscribers/`);\n      }).bind(this)\n    }, {\n      value: 'subscribed',\n      onClick: (e => {\n        this.props.history.push(`/profile/${this.props.profile.id}/subscribed/`);\n      }).bind(this)\n    }];\n\n    if (this.props.auth.id !== this.props.profile.id) {\n      menu_items.push({\n        value: 'send message',\n        onClick: (e => {\n          let options = {\n            id: this.props.auth.id,\n            token: this.props.auth.token,\n            user_id: this.props.profile.id,\n            message: {\n              date: new Date(),\n              text: ''\n            }\n          };\n          this.props.history.push(`/messages/${this.props.auth.id}/`);\n          this.props.selectDialog('');\n          this.props.sendMessage(options);\n          this.props.getDialogs(options);\n        }).bind(this)\n      });\n    }\n\n    ;\n    let photoSmall = this.props.profile ? this.props.profile.photos.small : avatar;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.wrp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['header-wrp'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header,\n      style: (() => {\n        return !this.props.history.location.pathname.split('/').includes('posts') ? {\n          'grid-template-columns': '80px 1fr 80px'\n        } : {\n          'grid-template-columns': '1fr 80px'\n        };\n      })(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, !this.props.history.location.pathname.split('/').includes('posts') && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(BackButtom, {\n      func: (() => {\n        this.props.history.push(`/profile/${this.props.profile.id}/posts/`);\n      }).bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['user-info'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.avatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(AvatarByPath, {\n      id: this.props.profile.id,\n      photo: photoSmall,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['profile-name'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    }, this.props.profile.name))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(DropDownMenu, {\n      items: menu_items,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      component: Posts,\n      path: '/profile/:user_id/posts',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      component: Subscribers,\n      path: '/profile/:user_id/subscribers',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      component: Subscribed,\n      path: '/profile/:user_id/subscribed',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    })), this.state.profInfoViewMode && /*#__PURE__*/React.createElement(Modal, {\n      width: 800,\n      height: 420,\n      Component: ProfileInfo,\n      changeVisibleModal: this.changeVisibleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 40\n      }\n    }), this.props.profileIsFetching && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['fetching-wrp'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['fetching'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FetchingToggle, {\n      width: 50,\n      height: 50,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 15\n      }\n    }))));\n  }\n\n}\n\n;\n\nclass ProfileContainer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    // let user_id = this.props.match.params.user_id;\n    let user_id = this.props.auth.id;\n    user_id = user_id;\n    let options = {\n      user_id,\n      id: this.props.auth ? this.props.auth.id : '',\n      token: this.props.auth ? this.props.auth.token : ''\n    };\n    this.props.getProfile(options);\n  }\n\n  componentWillUpdate(props) {\n    if (props.profile !== null) {\n      let route_profile = props.location.pathname.split('/').filter(item => item !== '')[1];\n      let current_profile = props.profile.id;\n\n      if (route_profile !== current_profile) {\n        let user_id = route_profile;\n        let options = {\n          user_id,\n          id: this.props.auth ? this.props.auth.id : '',\n          token: this.props.auth ? this.props.auth.token : ''\n        };\n        this.props.getProfile(options);\n      }\n\n      ;\n    }\n\n    ;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Profile, Object.assign({}, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 12\n      }\n    }));\n  }\n\n}\n\nlet mapsStateToProps = state => {\n  return {\n    profileIsFetching: state.profilePage.profileIsFetching,\n    postsIsFetching: state.profilePage.postsIsFetching,\n    profile: state.profilePage.profile,\n    id: state.profilePage.profile && state.profilePage.profile.id,\n    posts: state.profilePage.posts,\n    subscribers: state.profilePage.profile && state.profilePage.profile.subscribers || [],\n    subscribed: state.profilePage.profile && state.profilePage.profile.subscribed_to || []\n  };\n};\n\nexport default compose(connect(mapsStateToProps, {\n  getProfile,\n  sendMessage,\n  getDialogs,\n  selectDialog\n}), WithAuthData, WithSignInRedirect)(withRouter(ProfileContainer));","map":{"version":3,"sources":["/root/Documents/projects/social-network/src/components/Profile/Profile.jsx"],"names":["React","styles","connect","NavLink","Route","compose","withRouter","getProfile","WithAuthData","WithSignInRedirect","sendMessage","getDialogs","selectDialog","Preloader","DropDownMenu","Posts","Subscribers","Subscribed","Modal","ProfileInfo","BackButtom","FetchingToggle","AvatarByPath","avatar","Profile","Component","state","profInfoViewMode","scrollTop","load","changeVisibleModal","bool","setState","bind","onLoad","onError","photo","componentDidMount","componentWillUpdate","render","props","profile","status","name","photos","contacts","email","menu_items","value","onClick","e","history","push","id","auth","options","token","user_id","message","date","Date","text","photoSmall","small","wrp","header","location","pathname","split","includes","profileIsFetching","ProfileContainer","constructor","route_profile","filter","item","current_profile","mapsStateToProps","profilePage","postsIsFetching","posts","subscribers","subscribed","subscribed_to"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styles from './Profile.module.css';\nimport {connect} from 'react-redux';\nimport {NavLink, Route} from 'react-router-dom';\nimport {compose} from 'redux';\nimport {withRouter} from 'react-router-dom';\nimport {getProfile} from '../../reducers/profileReducer.js';\n\n//hocs\nimport WithAuthData from '../../hocs/WithAuthData.jsx';\nimport WithSignInRedirect from '../../hocs/WithSignInRedirect.jsx';\n\n//reducers\nimport {sendMessage, getDialogs, selectDialog} from '../../reducers/messagesReducer';\n\n//components\nimport Preloader from '../commons/Preloader/Preloader.jsx';\nimport DropDownMenu from '../commons/DropDownMenu/DropDownMenu';\nimport Posts from './Posts/Posts';\nimport Subscribers from './Subscribers/Subscribers';\nimport Subscribed from './Subscribed/Subscribed';\nimport Modal from '../commons/Modal/Modal';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\nimport BackButtom from '../commons/BackButton/BackButton.jsx';\nimport FetchingToggle from '../commons/FetchingToggle/FetchingToggle.jsx';\nimport AvatarByPath from '../commons/AvatarByPath/AvatarByPath.jsx';\n\nimport avatar from '../../assets/images/avatar_default.png';\n\n\nclass Profile extends React.Component {\n\n  state = {\n    profInfoViewMode: false,\n    scrollTop: 0,\n    load: false,\n  }\n\n  componentDidMount() {\n  }\n\n  componentWillUpdate() {\n  }\n\n  changeVisibleModal = ((bool) => this.setState({profInfoViewMode: bool})).bind(this);\n\n  onLoad = () => {\n    this.setState({load: true});\n  }\n  onError = () => {\n    this.setState({load: true, photo: avatar});\n  }\n\n  render() {\n\n    if(!this.props.profile) {\n      return <Preloader />;\n    };\n    let {status, name, photos, contacts, email} = this.props.profile;\n\n    let menu_items = [\n      {\n        value: 'more info',\n        onClick: ((e) => {\n          this.changeVisibleModal(true)\n        }).bind(this),\n      },\n      {\n        value: 'subscribers',\n        onClick: (e => {\n          this.props.history.push(`/profile/${this.props.profile.id}/subscribers/`);\n        }).bind(this),\n      },\n      {\n        value: 'subscribed',\n        onClick: (e => {\n          this.props.history.push(`/profile/${this.props.profile.id}/subscribed/`);\n        }).bind(this),\n      },\n    ];\n\n    if(this.props.auth.id !== this.props.profile.id){\n      menu_items.push({\n        value: 'send message',\n        onClick: ((e) => {\n\n          let options = {\n            id: this.props.auth.id,\n            token: this.props.auth.token,\n            user_id: this.props.profile.id,\n            message: {\n              date: new Date(),\n              text: '',\n            },\n          };\n\n          this.props.history.push(`/messages/${this.props.auth.id}/`);\n          this.props.selectDialog('');\n          this.props.sendMessage(options);\n          this.props.getDialogs(options);\n        }).bind(this),\n      });\n    };\n\n    let photoSmall = this.props.profile ? this.props.profile.photos.small: avatar;\n    return <div className={styles.wrp} >\n\n      <div className={styles['header-wrp']}>\n        <div className={styles.header}\n\n          style={ (() => {\n            return !this.props.history.location.pathname.split('/').includes('posts')? \n              {'grid-template-columns': '80px 1fr 80px'}: {'grid-template-columns': '1fr 80px'}\n          })() } >\n\n          {\n            !this.props.history.location.pathname.split('/').includes('posts') &&\n              <div>\n              <BackButtom func={(()=>{\n                this.props.history.push(`/profile/${this.props.profile.id}/posts/`);\n          }).bind(this)}/>\n        </div>\n      }\n\n      <div className={styles['user-info']}>\n        <div className={styles.avatar}>\n          <AvatarByPath id={this.props.profile.id} photo={photoSmall} />\n       </div>\n\n        <div className={styles['profile-name']} >\n          <h5>\n            {this.props.profile.name}\n          </h5>\n        </div>\n      </div>\n\n      <div>\n        <div >\n          <DropDownMenu \n            items={menu_items}/>\n        </div>\n      </div>\n\n      </div>\n      </div>\n\n      <div>\n        <Route component={Posts} path={'/profile/:user_id/posts'} />\n        <Route component={Subscribers} path={'/profile/:user_id/subscribers'}  />\n        <Route component={Subscribed} path={'/profile/:user_id/subscribed'}  />\n      </div>\n      {\n        this.state.profInfoViewMode && <Modal width={800} height={420} \n          Component={ProfileInfo}\n          changeVisibleModal={this.changeVisibleModal} />\n      }\n    {\n      this.props.profileIsFetching\n        && \n          <div className={styles['fetching-wrp']}>\n            <div className={styles['fetching']}>\n              <FetchingToggle width={50} height={50}/>\n            </div>\n          </div>\n    }\n      </div>\n  }\n};\n\nclass ProfileContainer extends React.Component {\n  constructor(props) {\n    super(props);\n  };\n\n  componentDidMount () {\n\n    // let user_id = this.props.match.params.user_id;\n    let user_id = this.props.auth.id;\n    user_id = user_id;\n    let options = {\n      user_id,\n      id: this.props.auth? this.props.auth.id: '',\n      token: this.props.auth? this.props.auth.token: '',\n    };\n    this.props.getProfile(options);\n  }\n\n  componentWillUpdate(props) {\n\n    if(props.profile !== null){\n      let route_profile = props.location.pathname\n        .split('/').filter(item => item !== '')[1];\n      let current_profile = props.profile.id;\n\n      if(route_profile !== current_profile) {\n        let user_id = route_profile;\n        let options = {\n          user_id,\n          id: this.props.auth? this.props.auth.id: '',\n          token: this.props.auth? this.props.auth.token: '',\n        };\n        this.props.getProfile(options);\n      };\n    };\n  }\n\n  render() {\n\n    return <Profile {...this.props} />\n  }\n}\n\nlet mapsStateToProps = (state) => {\n  return {\n    profileIsFetching: state.profilePage.profileIsFetching,\n    postsIsFetching: state.profilePage.postsIsFetching,\n    profile: state.profilePage.profile,\n    id: state.profilePage.profile && state.profilePage.profile.id,\n    posts: state.profilePage.posts,\n    subscribers: state.profilePage.profile && state.profilePage.profile.subscribers || [],\n    subscribed: state.profilePage.profile && state.profilePage.profile.subscribed_to || [],\n  };\n};\n\nexport default compose(\n  connect(mapsStateToProps, {getProfile, sendMessage, getDialogs, selectDialog}),\n  WithAuthData,\n  WithSignInRedirect,\n)(withRouter(ProfileContainer));\n"]},"metadata":{},"sourceType":"module"}