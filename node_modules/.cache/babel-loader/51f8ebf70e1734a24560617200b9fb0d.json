{"ast":null,"code":"var _jsxFileName = \"/root/Documents/projects/social-network/src/components/commons/FollowButton/FollowButton.jsx\";\nimport React from 'react';\nimport styles from './FollowButton.module.css';\nimport { connect } from 'react-redux';\nimport { followApi } from '../../../api/api';\nimport { setSubscribed, follow, unfollow } from '../../../reducers/authReducer';\n\nclass FollowButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isFetching: false,\n      followed: undefined\n    };\n\n    this.setIsFetching = isFetching => {\n      this.setState({\n        isFetching\n      });\n    };\n\n    this.setIsFollow = isFollow => {\n      this.setState({\n        followed: isFollow\n      });\n    };\n  }\n\n  componentDidMount() {\n    let followed = this.props.subscribed.map(user => user.id).includes(this.props.user.id);\n    this.setState({\n      followed\n    });\n  }\n\n  onFollow() {\n    let options = {\n      id: this.props.auth.id,\n      user_id: this.props.user.id,\n      token: this.props.auth.token\n    };\n    this.setState({\n      isFetching: true\n    });\n    this.props.follow(options, this.props.user, this.setIsFetching.bind(this), this.setIsFollow.bind(this));\n  }\n\n  onUnfollow() {\n    let options = {\n      id: this.props.auth.id,\n      user_id: this.props.user.id,\n      token: this.props.auth.token\n    };\n    this.setState({\n      isFetching: true\n    });\n    this.props.unfollow(options, this.props.user, this.setIsFetching.bind(this), this.setIsFollow.bind(this));\n  }\n\n  isDisabled() {\n    return this.state.isFetching;\n  }\n\n  render() {\n    let stylesArr = ['commons-modal-button'];\n    stylesArr.push(this.state.followed ? styles.followed : styles.follow);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.wrp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, this.props.user.id == this.props.auth.id && /*#__PURE__*/React.createElement(\"button\", {\n      className: 'commons-modal-button ' + styles.me,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 18\n      }\n    }, \"ME\") || /*#__PURE__*/React.createElement(\"button\", {\n      className: stylesArr.join(' '),\n      disabled: this.isDisabled(),\n      onClick: this.state.followed ? this.onUnfollow.bind(this) : this.onFollow.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 14\n      }\n    }, this.state.followed && 'FOLLOWED' || 'FOLLOW')));\n  }\n\n}\n\n;\n\nlet mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    subscribed: state.auth.subscribed_to\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setSubscribed,\n  follow,\n  unfollow\n})(FollowButton);","map":{"version":3,"sources":["/root/Documents/projects/social-network/src/components/commons/FollowButton/FollowButton.jsx"],"names":["React","styles","connect","followApi","setSubscribed","follow","unfollow","FollowButton","Component","state","isFetching","followed","undefined","setIsFetching","setState","setIsFollow","isFollow","componentDidMount","props","subscribed","map","user","id","includes","onFollow","options","auth","user_id","token","bind","onUnfollow","isDisabled","render","stylesArr","push","wrp","container","me","join","mapStateToProps","subscribed_to"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,SAAR,QAAwB,kBAAxB;AACA,SAAQC,aAAR,EAAuBC,MAAvB,EAA+BC,QAA/B,QAA8C,+BAA9C;;AAEA,MAAMC,YAAN,SAA2BP,KAAK,CAACQ,SAAjC,CAA2C;AAAA;AAAA;AAAA,SAEzCC,KAFyC,GAEjC;AACNC,MAAAA,UAAU,EAAE,KADN;AAENC,MAAAA,QAAQ,EAAEC;AAFJ,KAFiC;;AAAA,SAazCC,aAbyC,GAazBH,UAAU,IAAI;AAC5B,WAAKI,QAAL,CAAc;AAACJ,QAAAA;AAAD,OAAd;AACD,KAfwC;;AAAA,SAgBzCK,WAhByC,GAgB3BC,QAAQ,IAAI;AACxB,WAAKF,QAAL,CAAc;AAACH,QAAAA,QAAQ,EAAEK;AAAX,OAAd;AACD,KAlBwC;AAAA;;AAOzCC,EAAAA,iBAAiB,GAAG;AAElB,QAAIN,QAAQ,GAAG,KAAKO,KAAL,CAAWC,UAAX,CAAsBC,GAAtB,CAA0BC,IAAI,IAAIA,IAAI,CAACC,EAAvC,EAA2CC,QAA3C,CAAoD,KAAKL,KAAL,CAAWG,IAAX,CAAgBC,EAApE,CAAf;AACA,SAAKR,QAAL,CAAc;AAAEH,MAAAA;AAAF,KAAd;AACD;;AAUDa,EAAAA,QAAQ,GAAI;AACV,QAAIC,OAAO,GAAG;AACZH,MAAAA,EAAE,EAAE,KAAKJ,KAAL,CAAWQ,IAAX,CAAgBJ,EADR;AAEZK,MAAAA,OAAO,EAAE,KAAKT,KAAL,CAAWG,IAAX,CAAgBC,EAFb;AAGZM,MAAAA,KAAK,EAAE,KAAKV,KAAL,CAAWQ,IAAX,CAAgBE;AAHX,KAAd;AAKA,SAAKd,QAAL,CAAc;AAACJ,MAAAA,UAAU,EAAE;AAAb,KAAd;AACA,SAAKQ,KAAL,CAAWb,MAAX,CACEoB,OADF,EACW,KAAKP,KAAL,CAAWG,IADtB,EAC4B,KAAKR,aAAL,CAAmBgB,IAAnB,CAAwB,IAAxB,CAD5B,EAC2D,KAAKd,WAAL,CAAiBc,IAAjB,CAAsB,IAAtB,CAD3D;AAGD;;AAEDC,EAAAA,UAAU,GAAI;AACZ,QAAIL,OAAO,GAAG;AACZH,MAAAA,EAAE,EAAE,KAAKJ,KAAL,CAAWQ,IAAX,CAAgBJ,EADR;AAEZK,MAAAA,OAAO,EAAE,KAAKT,KAAL,CAAWG,IAAX,CAAgBC,EAFb;AAGZM,MAAAA,KAAK,EAAE,KAAKV,KAAL,CAAWQ,IAAX,CAAgBE;AAHX,KAAd;AAKA,SAAKd,QAAL,CAAc;AAACJ,MAAAA,UAAU,EAAE;AAAb,KAAd;AACA,SAAKQ,KAAL,CAAWZ,QAAX,CACEmB,OADF,EACW,KAAKP,KAAL,CAAWG,IADtB,EAC4B,KAAKR,aAAL,CAAmBgB,IAAnB,CAAwB,IAAxB,CAD5B,EAC2D,KAAKd,WAAL,CAAiBc,IAAjB,CAAsB,IAAtB,CAD3D;AAGD;;AAEDE,EAAAA,UAAU,GAAI;AACZ,WAAO,KAAKtB,KAAL,CAAWC,UAAlB;AACD;;AAEDsB,EAAAA,MAAM,GAAG;AAEP,QAAIC,SAAS,GAAG,CAAC,sBAAD,CAAhB;AACAA,IAAAA,SAAS,CAACC,IAAV,CAAe,KAAKzB,KAAL,CAAWE,QAAX,GAAqBV,MAAM,CAACU,QAA5B,GAAsCV,MAAM,CAACI,MAA5D;AAEA,wBACE;AAAK,MAAA,SAAS,EAAEJ,MAAM,CAACkC,GAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAElC,MAAM,CAACmC,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,KAAKlB,KAAL,CAAWG,IAAX,CAAgBC,EAAhB,IAAsB,KAAKJ,KAAL,CAAWQ,IAAX,CAAgBJ,EAAtC,iBACK;AAAQ,MAAA,SAAS,EAAE,0BAA0BrB,MAAM,CAACoC,EAApD;AACP,MAAA,QAAQ,EAAE,IADH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADL,iBAKC;AAAQ,MAAA,SAAS,EAAEJ,SAAS,CAACK,IAAV,CAAe,GAAf,CAAnB;AACD,MAAA,QAAQ,EAAE,KAAKP,UAAL,EADT;AAED,MAAA,OAAO,EAAG,KAAKtB,KAAL,CAAWE,QAAX,GACN,KAAKmB,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CADM,GACsB,KAAKL,QAAL,CAAcK,IAAd,CAAmB,IAAnB,CAH/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIA,KAAKpB,KAAL,CAAWE,QAAX,IAAuB,UAAvB,IAAqC,QAJrC,CANL,CADF,CADF;AAkBD;;AAxEwC;;AAyE1C;;AAED,IAAI4B,eAAe,GAAI9B,KAAD,IAAW;AAC/B,SAAO;AACLiB,IAAAA,IAAI,EAAEjB,KAAK,CAACiB,IADP;AAELP,IAAAA,UAAU,EAAEV,KAAK,CAACiB,IAAN,CAAWc;AAFlB,GAAP;AAID,CALD;;AAOA,eAAetC,OAAO,CAACqC,eAAD,EAAkB;AAACnC,EAAAA,aAAD;AAAgBC,EAAAA,MAAhB;AAAwBC,EAAAA;AAAxB,CAAlB,CAAP,CAA4DC,YAA5D,CAAf","sourcesContent":["import React from 'react';\nimport styles from './FollowButton.module.css';\nimport {connect} from 'react-redux';\nimport {followApi} from '../../../api/api';\nimport {setSubscribed, follow, unfollow} from '../../../reducers/authReducer';\n\nclass FollowButton extends React.Component {\n\n  state = {\n    isFetching: false,\n    followed: undefined,\n  }\n\n  componentDidMount() {\n\n    let followed = this.props.subscribed.map(user => user.id).includes(this.props.user.id);\n    this.setState({ followed });\n  }\n\n  setIsFetching = isFetching => {\n    this.setState({isFetching})\n  }\n  setIsFollow = isFollow => {\n    this.setState({followed: isFollow});\n  }\n\n\n  onFollow () {\n    let options = {\n      id: this.props.auth.id,\n      user_id: this.props.user.id,\n      token: this.props.auth.token,\n    };\n    this.setState({isFetching: true});\n    this.props.follow(\n      options, this.props.user, this.setIsFetching.bind(this), this.setIsFollow.bind(this)\n    );\n  };\n\n  onUnfollow () {\n    let options = {\n      id: this.props.auth.id,\n      user_id: this.props.user.id,\n      token: this.props.auth.token,\n    };\n    this.setState({isFetching: true});\n    this.props.unfollow(\n      options, this.props.user, this.setIsFetching.bind(this), this.setIsFollow.bind(this)\n    );\n  };\n\n  isDisabled () {\n    return this.state.isFetching;\n  };\n\n  render() {\n\n    let stylesArr = ['commons-modal-button'];\n    stylesArr.push(this.state.followed? styles.followed: styles.follow);\n\n    return (\n      <div className={styles.wrp}>\n        <div className={styles.container}>\n          { this.props.user.id == this.props.auth.id\n              && <button className={'commons-modal-button ' + styles.me}\n          disabled={true}>\n          ME\n        </button>\n          || <button className={stylesArr.join(' ')}\n            disabled={this.isDisabled()}\n            onClick={ this.state.followed ? \n                this.onUnfollow.bind(this): this.onFollow.bind(this) }>\n            {this.state.followed && 'FOLLOWED' || 'FOLLOW'}\n          </button>\n          }\n      </div>\n      </div>\n    );\n  }\n};\n\nlet mapStateToProps = (state) => {\n  return {\n    auth: state.auth,\n    subscribed: state.auth.subscribed_to,\n  }\n};\n\nexport default connect(mapStateToProps, {setSubscribed, follow, unfollow})(FollowButton);\n"]},"metadata":{},"sourceType":"module"}