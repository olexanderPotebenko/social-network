{"ast":null,"code":"var _jsxFileName = \"/root/Documents/projects/social-network/src/components/Notification/Notification.jsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { NavLink } from 'react-router-dom';\nimport WithAuthData from '../../hocs/WithAuthData.jsx';\nimport { removeNotification, setOpacity } from '../../reducers/notifi.js';\nimport CloseButton from '../commons/CloseButton/CloseButton.jsx';\nimport Avatar from '../commons/Avatar/Avatar.jsx';\nimport styles from './Notification.module.css';\nimport avatar from '../../assets/images/avatar_default.png';\nimport { getHoursMinutesSeconds } from '../../utils/functions.js';\n\nclass Notification extends React.Component {\n  componentDidMount() {\n    //alert('Create component');\n    let interval = setInterval(() => {\n      // console.log(interval + ' interval');\n      setTimeout(() => {\n        this.props.notifications.forEach(item => {\n          let now = new Date().getTime();\n          let end = item.date + 7 * 1000;\n          let rest = (end - now) / (end - item.date);\n          rest = rest < 0 ? 0 : rest; // console.log(rest);\n\n          if (now > end) this.props.removeNotification(item.id);else if (rest < .8) this.props.setOpacity(item.id, rest);\n        });\n      }, 20);\n    }, 100);\n  }\n\n  render() {\n    let avatarStyles = {\n      wrp: {\n        width: 50,\n        height: 50\n      },\n      avatar: {}\n    };\n    let notifications = this.props.notifications.map(item => /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['item-wrp'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.item,\n      style: {\n        opacity: item.opacity\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      id: item.user.id,\n      styles: avatarStyles,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }, item.user.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.description,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, item.description + ' ' + getHoursMinutesSeconds(item.date))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.close,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CloseButton, {\n      close: this.props.removeNotification.bind(this, item.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    })))));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.wrp,\n      style: {\n        bottom: 80 * this.props.notifications.length\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }\n    }, notifications));\n  }\n\n}\n\nconst mapsStateToProps = state => {\n  return {\n    notifications: state.notifi.notifications\n  };\n};\n\nconst mapsDispatchToProps = {\n  removeNotification,\n  setOpacity\n};\nexport default compose(WithAuthData, connect(mapsStateToProps, mapsDispatchToProps))(Notification);","map":{"version":3,"sources":["/root/Documents/projects/social-network/src/components/Notification/Notification.jsx"],"names":["React","connect","compose","NavLink","WithAuthData","removeNotification","setOpacity","CloseButton","Avatar","styles","avatar","getHoursMinutesSeconds","Notification","Component","componentDidMount","interval","setInterval","setTimeout","props","notifications","forEach","item","now","Date","getTime","end","date","rest","id","render","avatarStyles","wrp","width","height","map","opacity","user","name","description","close","bind","bottom","length","container","mapsStateToProps","state","notifi","mapsDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport {compose} from 'redux';\nimport {NavLink} from 'react-router-dom';\nimport WithAuthData from '../../hocs/WithAuthData.jsx';\nimport {removeNotification, setOpacity} from '../../reducers/notifi.js';\nimport CloseButton from '../commons/CloseButton/CloseButton.jsx';\nimport Avatar from '../commons/Avatar/Avatar.jsx';\n\nimport styles from './Notification.module.css';\nimport avatar from '../../assets/images/avatar_default.png';\n\nimport {getHoursMinutesSeconds} from '../../utils/functions.js';\n\nclass Notification extends React.Component {\n\n  componentDidMount () {\n\n    //alert('Create component');\n    let interval = setInterval(() => {\n      // console.log(interval + ' interval');\n      setTimeout(() => {\n        this.props.notifications.forEach(item => {\n          let now = new Date().getTime();\n          let end = item.date + 7 * 1000;\n          let rest = (end - now)/(end - item.date);\n          rest = rest < 0? 0: rest;\n          // console.log(rest);\n          if(now > end) this.props.removeNotification(item.id);\n          else if (rest < .8) this.props.setOpacity(item.id, rest);\n        });\n      }, 20);\n    }, 100);\n  }\n\n  render() {\n\n    let avatarStyles = {\n      wrp: {\n        width: 50,\n        height: 50,\n      },\n      avatar: {\n      },\n    };\n\n    let notifications = this.props.notifications.map(item => \n      <div className={styles['item-wrp']}>\n        <div className={styles.item} \n          style={ {opacity: item.opacity} }>\n          <Avatar id={item.user.id} styles={avatarStyles}/>\n          <div>\n            <div className={styles.name}>\n              {item.user.name}\n            </div>\n            <div className={styles.description}>\n              {item.description + ' ' + getHoursMinutesSeconds(item.date)}\n            </div>\n          </div>\n          <div className={styles.close}>\n            <CloseButton close={this.props.removeNotification.bind(this, item.id)} />\n          </div>\n        </div>\n      </div>\n    );\n\n\n    return <div className={styles.wrp}\n      style={ {bottom: 80*this.props.notifications.length} }>\n      <div className={styles.container}>\n        {notifications}\n      </div>\n    </div>\n  }\n}\n\nconst mapsStateToProps = state => {\n  return {\n    notifications: state.notifi.notifications,\n  }\n}\n\nconst mapsDispatchToProps = {\n  removeNotification,\n  setOpacity,\n}\n\nexport default compose (\n  WithAuthData,\n  connect(mapsStateToProps, mapsDispatchToProps)\n)(Notification);\n\n"]},"metadata":{},"sourceType":"module"}