{"ast":null,"code":"import { userApi, followApi } from '../api/api.js';\nexport const FOLLOW = 'FOLLOW';\nexport const UNFOLLOW = 'UNFOLLOW';\nconst SET_USERS = 'SET-USERS';\nconst SET_USERS_TOTAL_COUNT = 'SET-USERS-TOTAL-COUNT';\nconst SET_PAGE_CURRENT = 'SET-PAGE-CURRENT';\nconst SET_IS_FETCHING = 'SET-IS-FETCHING';\nconst ADD_IS_FOLLOWING_FETCHING = 'ADD-IS-FOLLOWING-FETCHING';\nconst REMOVE_IS_FOLLOWING_FETCHING = 'REMOVE-IS-FOLLOWING-FETCHING';\nconst initial_state = {\n  options: {\n    page_size: 8,\n    page_current: 1,\n    total_users_count: 0,\n    is_fetching: false,\n    is_following_fetching: []\n  },\n  users: []\n};\n\nlet usersReducer = (state = initial_state, action) => {\n  switch (action.type) {\n    case SET_USERS:\n      return setUsers(state, action.users);\n\n    case SET_USERS_TOTAL_COUNT:\n      return setTotalUsersCount(state, action.total_users_count);\n\n    case SET_PAGE_CURRENT:\n      return setPageCurrent(state, action.page_current);\n\n    case SET_IS_FETCHING:\n      return setIsFetching(state, action.is_fetching);\n\n    default:\n      return state;\n  }\n\n  ;\n};\n\nlet setUsers = (state, users) => {\n  let state_copy = { ...state\n  };\n  state_copy.users = [...users];\n  return state_copy;\n};\n\nlet setTotalUsersCount = (state, total_users_count) => {\n  let state_copy = { ...state\n  };\n  state_copy.options = { ...state.options\n  };\n  state_copy.options.total_users_count = total_users_count;\n  return state_copy;\n};\n\nlet setPageCurrent = (state, page_current) => {\n  let state_copy = { ...state\n  };\n  state_copy.options = { ...state.options\n  };\n  state_copy.options.page_current = page_current;\n  return state_copy;\n};\n\nlet setIsFetching = (state, is_fetching) => {\n  let state_copy = { ...state\n  };\n  state_copy.options = { ...state.options\n  };\n  state_copy.options.is_fetching = is_fetching;\n  return state_copy;\n};\n\nlet setUsersActionCreator = users => {\n  return {\n    type: SET_USERS,\n    users\n  };\n};\n\nlet setUsersCountActionCreator = total_users_count => {\n  return {\n    type: SET_USERS_TOTAL_COUNT,\n    total_users_count\n  };\n};\n\nlet setPageCurrentActionCreator = page_current => {\n  return {\n    type: SET_PAGE_CURRENT,\n    page_current\n  };\n};\n\nlet setIsFetchingActionCreator = is_fetching => {\n  return {\n    type: SET_IS_FETCHING,\n    is_fetching\n  };\n};\n\nexport const getUsers = options => dispatch => {\n  dispatch(setPageCurrentActionCreator(options.page_current));\n  dispatch(setIsFetchingActionCreator(true));\n  userApi.getUsers(options).then(data => {\n    dispatch(setUsersActionCreator(data.items));\n    dispatch(setUsersCountActionCreator(data.totalCount));\n    dispatch(setIsFetchingActionCreator(false));\n  });\n};\nexport default usersReducer;","map":{"version":3,"sources":["/root/Documents/projects/social-network/src/reducers/usersReducer.js"],"names":["userApi","followApi","FOLLOW","UNFOLLOW","SET_USERS","SET_USERS_TOTAL_COUNT","SET_PAGE_CURRENT","SET_IS_FETCHING","ADD_IS_FOLLOWING_FETCHING","REMOVE_IS_FOLLOWING_FETCHING","initial_state","options","page_size","page_current","total_users_count","is_fetching","is_following_fetching","users","usersReducer","state","action","type","setUsers","setTotalUsersCount","setPageCurrent","setIsFetching","state_copy","setUsersActionCreator","setUsersCountActionCreator","setPageCurrentActionCreator","setIsFetchingActionCreator","getUsers","dispatch","then","data","items","totalCount"],"mappings":"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","sourcesContent":["import {userApi, followApi} from '../api/api.js';\n\nexport const FOLLOW = 'FOLLOW';\nexport const UNFOLLOW = 'UNFOLLOW';\n\nconst SET_USERS = 'SET-USERS';\nconst SET_USERS_TOTAL_COUNT = 'SET-USERS-TOTAL-COUNT';\nconst SET_PAGE_CURRENT = 'SET-PAGE-CURRENT';\nconst SET_IS_FETCHING = 'SET-IS-FETCHING';\nconst ADD_IS_FOLLOWING_FETCHING = 'ADD-IS-FOLLOWING-FETCHING';\nconst REMOVE_IS_FOLLOWING_FETCHING = 'REMOVE-IS-FOLLOWING-FETCHING';\n\nconst initial_state = {\n  options: {\n    page_size: 8,\n    page_current: 1,\n    total_users_count: 0,\n    is_fetching: false,\n    is_following_fetching: [],\n  },\n  users: [],\n};\n\nlet usersReducer = (state = initial_state, action) => {\n  switch (action.type) {\n    case SET_USERS:\n      return setUsers(state, action.users);\n    case SET_USERS_TOTAL_COUNT:\n      return setTotalUsersCount(state, action.total_users_count);\n    case SET_PAGE_CURRENT:\n      return setPageCurrent(state, action.page_current);\n    case SET_IS_FETCHING: \n      return setIsFetching(state, action.is_fetching);\n    default:\n      return state;\n  };\n};\n\nlet setUsers = (state, users) => {\n  let state_copy = {...state};\n  state_copy.users = [...users];\n  return state_copy;\n};\n\nlet setTotalUsersCount = (state, total_users_count) => {\n  let state_copy = {...state};\n  state_copy.options = {...state.options};\n  state_copy.options.total_users_count = total_users_count;\n  return state_copy;\n};\n\nlet setPageCurrent = (state, page_current) => {\n  let state_copy = {...state};\n  state_copy.options = {...state.options};\n  state_copy.options.page_current = page_current;\n  return state_copy;\n};\n\nlet setIsFetching = (state, is_fetching) => {\n  let state_copy = {...state};\n  state_copy.options = {...state.options};\n  state_copy.options.is_fetching = is_fetching;\n  return state_copy;\n}\n\nlet setUsersActionCreator = users => {\n  return {type: SET_USERS, users};\n};\n\nlet setUsersCountActionCreator = total_users_count => {\n  return {type: SET_USERS_TOTAL_COUNT, total_users_count};\n};\n\nlet setPageCurrentActionCreator = page_current => {\n  return {type: SET_PAGE_CURRENT, page_current};\n};\n\nlet setIsFetchingActionCreator = is_fetching => {\n  return {type: SET_IS_FETCHING, is_fetching};\n};\n\nexport const getUsers = (options) => dispatch => {\n  dispatch(setPageCurrentActionCreator(options.page_current));\n  dispatch(setIsFetchingActionCreator(true));\n  userApi.getUsers(options)\n    .then(data => {\n      dispatch(setUsersActionCreator(data.items) );\n      dispatch(setUsersCountActionCreator(data.totalCount) );\n      dispatch(setIsFetchingActionCreator(false) );\n    });\n}\n\nexport default usersReducer;\n"]},"metadata":{},"sourceType":"module"}