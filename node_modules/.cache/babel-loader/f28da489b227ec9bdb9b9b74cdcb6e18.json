{"ast":null,"code":"var _jsxFileName = \"/home/i/Documents/projects/social-network/src/components/Profile/Profile.jsx\";\nimport React from 'react';\nimport styles from './Profile.module.css';\nimport { connect } from 'react-redux';\nimport { NavLink, Route } from 'react-router-dom';\nimport { compose } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport { getProfile } from '../../reducers/profileReducer.js'; //hocs\n\nimport WithAuthData from '../../hocs/WithAuthData.jsx';\nimport WithSignInRedirect from '../../hocs/WithSignInRedirect.jsx'; //reducers\n\nimport { sendMessage } from '../../reducers/messagesReducer'; //components\n\nimport Preloader from '../commons/Preloader/Preloader.jsx';\nimport DropDownMenu from '../commons/DropDownMenu/DropDownMenu';\nimport Posts from './Posts/Posts';\nimport Subscribers from './Subscribers/Subscribers';\nimport Subscribed from './Subscribed/Subscribed';\nimport Modal from '../commons/Modal/Modal';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\n\nclass Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      postedModal: false,\n      scrollTop: 0\n    };\n\n    this.changeVisibleModal = (bool => this.setState({\n      postedModal: bool\n    })).bind(this);\n  }\n\n  componentDidMount() {}\n\n  componentWillUpdate() {}\n\n  render() {\n    let selected = this.props.location.pathname.split('/').slice(-1)[0];\n\n    if (!this.props.profile) {\n      return /*#__PURE__*/React.createElement(Preloader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 14\n        }\n      });\n    }\n\n    ;\n    let {\n      status,\n      name,\n      photos,\n      contacts,\n      email\n    } = this.props.profile;\n    let posts_styles = [styles.menu_item, styles.separator];\n    let subscribers_styles = [styles.menu_item, styles.separator];\n    let subscribed_styles = [styles.menu_item];\n\n    switch (selected) {\n      case 'posts':\n        posts_styles.push(styles.current_item);\n        break;\n\n      case 'subscribers':\n        subscribers_styles.push(styles.current_item);\n        break;\n\n      case 'subscribed':\n        subscribed_styles.push(styles.current_item);\n        break;\n    }\n\n    ;\n    posts_styles = posts_styles.join(' ');\n    subscribers_styles = subscribers_styles.join(' ');\n    subscribed_styles = subscribed_styles.join(' ');\n    let drop_down_menu_items_arr = [{\n      value: 'more info',\n      onClick: (e => {\n        e.preventDefault();\n        this.changeVisibleModal(true);\n      }).bind(this)\n    } // {\n    //     value: 'follow',\n    //     onClick: () => alert('not implemented functionality'),\n    // },\n    // {\n    //     value: 'follow',\n    //     onClick: () => alert('not implemented functionality'),\n    // },\n    // {\n    //     value: 'follow',\n    //     onClick: () => alert('not implemented functionality'),\n    // },\n    ];\n\n    if (this.props.auth.id !== this.props.profile.id) {\n      drop_down_menu_items_arr.push({\n        value: 'send message',\n        onClick: (e => {\n          e.preventDefault();\n          debugger;\n          let options = {\n            id: this.props.auth.id,\n            token: this.props.auth.token,\n            user_id: this.props.profile.id,\n            message: {\n              date: new Date(),\n              text: ''\n            }\n          };\n          alert(options.id + ' ' + options.user_id);\n          this.props.history.push(`/messages/${this.props.auth.id}/send/${this.props.profile.id}`);\n          this.props.sendMessage(options);\n        }).bind(this)\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: 'wrp',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      className: styles.horizontal_menu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      className: posts_styles,\n      onClick: () => selected = 'posts',\n      to: \"posts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, \"POSTS\", ` ${this.props.posts.length}`)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      className: subscribers_styles,\n      onClick: () => selected = 'subscribers',\n      to: \"subscribers\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 15\n      }\n    }, \"SUBSCRIBERS\", ` ${this.props.subscribers.length}`)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      className: subscribed_styles,\n      onClick: () => selected = 'subscribed',\n      to: \"subscribed\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, \"SUBSRIBED\", ` ${this.props.subscribed.length}`)))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '5px',\n        right: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(DropDownMenu, {\n      drop_down_menu_items_arr: drop_down_menu_items_arr,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['profile-name'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, this.props.profile.name)), this.state.postedModal && /*#__PURE__*/React.createElement(Modal, {\n      width: 800,\n      height: 420,\n      Component: ProfileInfo,\n      changeVisibleModal: this.changeVisibleModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 35\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        overflow: 'hidden'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      component: Posts,\n      path: '/profile/:user_id/posts',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      component: Subscribers,\n      path: '/profile/:user_id/subscribers',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      component: Subscribed,\n      path: '/profile/:user_id/subscribed',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }\n    })));\n  }\n\n}\n\n;\n\nclass ProfileContainer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    let user_id = this.props.match.params.user_id;\n    user_id = user_id;\n    let options = {\n      user_id,\n      id: this.props.auth ? this.props.auth.id : '',\n      token: this.props.auth ? this.props.auth.token : ''\n    };\n    this.props.getProfile(options);\n  }\n\n  componentWillUpdate(props) {\n    if (props.profile !== null) {\n      let route_profile = props.location.pathname.split('/').filter(item => item !== '')[1];\n      let current_profile = props.profile.id;\n\n      if (route_profile !== current_profile) {\n        let user_id = route_profile;\n        let options = {\n          user_id,\n          id: this.props.auth ? this.props.auth.id : '',\n          token: this.props.auth ? this.props.auth.token : ''\n        };\n        this.props.getProfile(options);\n      }\n\n      ;\n    }\n\n    ;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Profile, Object.assign({}, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 12\n      }\n    }));\n  }\n\n}\n\nlet mapsStateToProps = state => {\n  return {\n    profile: state.profilePage.profile,\n    posts: state.profilePage.posts,\n    subscribers: state.profilePage.profile && state.profilePage.profile.subscribers || [],\n    subscribed: state.profilePage.profile && state.profilePage.profile.subscribed_to || []\n  };\n};\n\nexport default compose(connect(mapsStateToProps, {\n  getProfile,\n  sendMessage\n}), WithAuthData, WithSignInRedirect)(withRouter(ProfileContainer));","map":{"version":3,"sources":["/home/i/Documents/projects/social-network/src/components/Profile/Profile.jsx"],"names":["React","styles","connect","NavLink","Route","compose","withRouter","getProfile","WithAuthData","WithSignInRedirect","sendMessage","Preloader","DropDownMenu","Posts","Subscribers","Subscribed","Modal","ProfileInfo","Profile","Component","state","postedModal","scrollTop","changeVisibleModal","bool","setState","bind","componentDidMount","componentWillUpdate","render","selected","props","location","pathname","split","slice","profile","status","name","photos","contacts","email","posts_styles","menu_item","separator","subscribers_styles","subscribed_styles","push","current_item","join","drop_down_menu_items_arr","value","onClick","e","preventDefault","auth","id","options","token","user_id","message","date","Date","text","alert","history","header","horizontal_menu","posts","length","subscribers","subscribed","position","top","right","overflow","ProfileContainer","constructor","match","params","route_profile","filter","item","current_profile","mapsStateToProps","profilePage","subscribed_to"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styles from './Profile.module.css';\nimport {connect} from 'react-redux';\nimport {NavLink, Route} from 'react-router-dom';\nimport {compose} from 'redux';\nimport {withRouter} from 'react-router-dom';\nimport {getProfile} from '../../reducers/profileReducer.js';\n\n//hocs\nimport WithAuthData from '../../hocs/WithAuthData.jsx';\nimport WithSignInRedirect from '../../hocs/WithSignInRedirect.jsx';\n\n//reducers\nimport {sendMessage} from '../../reducers/messagesReducer';\n\n\n//components\nimport Preloader from '../commons/Preloader/Preloader.jsx';\nimport DropDownMenu from '../commons/DropDownMenu/DropDownMenu';\nimport Posts from './Posts/Posts';\nimport Subscribers from './Subscribers/Subscribers';\nimport Subscribed from './Subscribed/Subscribed';\nimport Modal from '../commons/Modal/Modal';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\n\n\n\nclass Profile extends React.Component {\n\n  state = {\n    postedModal: false,\n    scrollTop: 0,\n  }\n\n  componentDidMount() {\n  }\n\n  componentWillUpdate() {\n  }\n\n  changeVisibleModal = ((bool) => this.setState({postedModal: bool})).bind(this);\n\n\n  render() {\n    let selected = this.props.location.pathname.split('/').slice(-1)[0];\n\n    if(!this.props.profile) {\n      return <Preloader />;\n    };\n    let {status, name, photos, contacts, email} = this.props.profile;\n\n    let posts_styles = [styles.menu_item, styles.separator];\n    let subscribers_styles = [styles.menu_item, styles.separator];\n    let subscribed_styles = [styles.menu_item];\n\n    switch(selected) {\n      case 'posts':\n        posts_styles.push(styles.current_item);\n        break;\n      case 'subscribers':\n        subscribers_styles.push(styles.current_item);\n        break;\n      case 'subscribed':\n        subscribed_styles.push(styles.current_item);\n        break;\n    };\n\n    posts_styles = posts_styles.join(' ');\n    subscribers_styles = subscribers_styles.join(' ');\n    subscribed_styles = subscribed_styles.join(' ');\n\n    let drop_down_menu_items_arr = [\n      {\n        value: 'more info',\n        onClick: ((e) => {\n          e.preventDefault();\n          this.changeVisibleModal(true)\n        }).bind(this),\n      },\n      // {\n      //     value: 'follow',\n      //     onClick: () => alert('not implemented functionality'),\n      // },\n      // {\n      //     value: 'follow',\n      //     onClick: () => alert('not implemented functionality'),\n      // },\n      // {\n      //     value: 'follow',\n      //     onClick: () => alert('not implemented functionality'),\n      // },\n\n    ];\n    if(this.props.auth.id !== this.props.profile.id){\n      drop_down_menu_items_arr.push({\n        value: 'send message',\n        onClick: ((e) => {\n          e.preventDefault();\n          debugger;\n\n          let options = {\n            id: this.props.auth.id,\n            token: this.props.auth.token,\n            user_id: this.props.profile.id,\n            message: {\n              date: new Date(),\n              text: '',\n            },\n          };\n          alert(options.id + ' ' + options.user_id)\n\n          this.props.history.push(`/messages/${this.props.auth.id}/send/${this.props.profile.id}`);\n          this.props.sendMessage(options);\n        }).bind(this),\n      })\n    }\n\n    return <div className={'wrp'}>\n      <div className={styles.header}>\n        <nav className={styles.horizontal_menu}>\n          <ul>\n            <li >\n              <NavLink className={posts_styles} \n                onClick={() => selected = 'posts'}\n                to='posts' >\n                POSTS\n                {\n                  ` ${this.props.posts.length}`\n                }\n              </NavLink>\n            </li>\n            <li>\n              <NavLink  className={subscribers_styles} \n                onClick={() => selected = 'subscribers'}\n                to='subscribers' >\n                SUBSCRIBERS\n                {\n                  ` ${this.props.subscribers.length}`\n                }\n              </NavLink>\n            </li>\n            <li>\n              <NavLink className={subscribed_styles} \n                onClick={() => selected = 'subscribed'}\n                to='subscribed' >\n                SUBSRIBED \n                {\n                  ` ${this.props.subscribed.length}`\n                }\n              </NavLink>\n            </li>\n          </ul>\n        </nav>\n        <div \n          style={ {\n            position: 'absolute',\n            top: '5px', right: 40,\n          } } >\n          <DropDownMenu \n            drop_down_menu_items_arr={drop_down_menu_items_arr}/>\n        </div>\n        <div className={styles['profile-name']} >\n          {this.props.profile.name}\n        </div>\n        {/*\n                <div className={styles['profile-info']} >\n                    <a href='' className={styles['profile-more-info']}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.changeVisibleModal(true)}\n                        } >\n                        more info\n                    </a>\n                </div>\n                */}\n      </div>\n      {\n        this.state.postedModal && <Modal width={800} height={420} \n      Component={ProfileInfo}\n      changeVisibleModal={ this.changeVisibleModal } />\n\n      }\n      <div style={ {overflow: 'hidden' } }>\n        <Route component={Posts} path={'/profile/:user_id/posts'} />\n        <Route component={Subscribers} path={'/profile/:user_id/subscribers'}  />\n        <Route component={Subscribed} path={'/profile/:user_id/subscribed'}  />\n      </div>\n      </div>\n  }\n\n};\n\n\nclass ProfileContainer extends React.Component {\n  constructor(props) {\n    super(props);\n  };\n\n  componentDidMount () {\n\n    let user_id = this.props.match.params.user_id;\n    user_id = user_id;\n    let options = {\n      user_id,\n      id: this.props.auth? this.props.auth.id: '',\n      token: this.props.auth? this.props.auth.token: '',\n    };\n    this.props.getProfile(options);\n  }\n\n  componentWillUpdate(props) {\n\n    if(props.profile !== null){\n      let route_profile = props.location.pathname\n        .split('/').filter(item => item !== '')[1];\n      let current_profile = props.profile.id;\n\n      if(route_profile !== current_profile) {\n        let user_id = route_profile;\n        let options = {\n          user_id,\n          id: this.props.auth? this.props.auth.id: '',\n          token: this.props.auth? this.props.auth.token: '',\n        };\n        this.props.getProfile(options);\n      };\n    };\n  }\n\n  render() {\n\n    return <Profile {...this.props} />\n  }\n}\n\nlet mapsStateToProps = (state) => {\n  return {\n    profile: state.profilePage.profile,\n    posts: state.profilePage.posts,\n    subscribers: state.profilePage.profile && state.profilePage.profile.subscribers || [],\n    subscribed: state.profilePage.profile && state.profilePage.profile.subscribed_to || [],\n  };\n};\n\nexport default compose(\n  connect(mapsStateToProps, {getProfile, sendMessage}),\n  WithAuthData,\n  WithSignInRedirect,\n)(withRouter(ProfileContainer));\n"]},"metadata":{},"sourceType":"module"}